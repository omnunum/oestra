(function(e){function t(t){for(var a,c,s=t[0],o=t[1],l=t[2],d=0,f=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&f.push(i[c][0]),i[c]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var o=n[s];0!==i[o]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},i={app:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/oestra/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=o;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1774:function(e,t,n){"use strict";n("9747")},"2dc3":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t),n.d(t,"run",(function(){return de})),n.d(t,"runThenLog",(function(){return be}));n("99af"),n("4160"),n("d3b7"),n("07ac"),n("ac1f"),n("3ca3"),n("5319"),n("159b"),n("ddb0");var a=n("ade3"),i=(n("96cf"),n("1da1")),r=n("3835"),c=n("b85c"),s=n("bee2"),o=n("d4ec"),l=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2ef0")),u=n("1315"),d=n("7a23"),f={id:"nav"},b=Object(d["f"])("Home"),p=Object(d["f"])(" | "),v=Object(d["f"])("Filings");function h(e,t){var n=Object(d["w"])("router-link"),a=Object(d["w"])("router-view");return Object(d["p"])(),Object(d["d"])(d["a"],null,[Object(d["g"])("div",f,[Object(d["g"])(n,{to:"/"},{default:Object(d["D"])((function(){return[b]})),_:1}),p,Object(d["g"])(n,{to:"/filings"},{default:Object(d["D"])((function(){return[v]})),_:1})]),Object(d["g"])(a)],64)}n("1774");const g={};g.render=h;var j=g,O=n("6c02"),m=n("cf05"),y=n.n(m),k={class:"home"},w=Object(d["g"])("img",{alt:"Vue logo",src:y.a},null,-1);function x(e,t,n,a,i,r){var c=Object(d["w"])("HelloWorld");return Object(d["p"])(),Object(d["d"])("div",k,[w,Object(d["g"])(c,{msg:"Welcome to Your Vue.js App"})])}var _=Object(d["F"])("data-v-b9167eee");Object(d["s"])("data-v-b9167eee");var S={class:"hello"},T=Object(d["e"])('<p data-v-b9167eee> For a guide and recipes on how to configure / customize this project,<br data-v-b9167eee> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-cli documentation</a>. </p><h3 data-v-b9167eee>Installed CLI Plugins</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-b9167eee>babel</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint" target="_blank" rel="noopener" data-v-b9167eee>eslint</a></li></ul><h3 data-v-b9167eee>Essential Links</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Core Docs</a></li><li data-v-b9167eee><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Forum</a></li><li data-v-b9167eee><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Community Chat</a></li><li data-v-b9167eee><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-b9167eee>Twitter</a></li><li data-v-b9167eee><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>News</a></li></ul><h3 data-v-b9167eee>Ecosystem</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-router</a></li><li data-v-b9167eee><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vuex</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-b9167eee>vue-devtools</a></li><li data-v-b9167eee><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-loader</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-b9167eee>awesome-vue</a></li></ul>',7);Object(d["q"])();var I=_((function(e,t,n,a,i,r){return Object(d["p"])(),Object(d["d"])("div",S,[Object(d["g"])("h1",null,Object(d["y"])(n.msg),1),T])})),F={name:"HelloWorld",props:{msg:String}};n("8497");F.render=I,F.__scopeId="data-v-b9167eee";var D=F,R={name:"Home",components:{HelloWorld:D}};R.render=x;var B=R,V={id:"filings"},A=Object(d["e"])('<div class="row"><div class="col"><span>Year</span></div><div class="col"><span>Gross Income</span></div><div class="col"><span>Withholdings</span></div><div class="col"><span>State</span></div><div class="col"><span>Status</span></div></div>',1);function C(e,t,n,a,i,r){var c=Object(d["w"])("Filing");return Object(d["p"])(),Object(d["d"])("div",V,[Object(d["g"])("button",{id:"filings-button-add-future-year",onClick:t[1]||(t[1]=function(e){return r.addYear(r.pastYear)})},"Add filing for "+Object(d["y"])(r.pastYear),1),A,(Object(d["p"])(!0),Object(d["d"])(d["a"],null,Object(d["v"])(i.filings,(function(e,t){return Object(d["p"])(),Object(d["d"])(c,{key:t,year:+t,filing:e},null,8,["year","filing"])})),128)),Object(d["g"])("button",{id:"filings-button-add-future-year",onClick:t[2]||(t[2]=function(e){return r.addYear(r.futureYear)})},"Add filing for "+Object(d["y"])(r.futureYear),1)])}n("b64b");var E=Object(d["F"])("data-v-198b9cd4");Object(d["s"])("data-v-198b9cd4");var P={class:"row"},Y={class:"col"},L={class:"col"},J={class:"col"},G={class:"col"};Object(d["q"])();var M=E((function(e,t,n,a,i,r){var c=Object(d["w"])("select-states");return Object(d["p"])(),Object(d["d"])("div",P,[Object(d["g"])("div",Y,[Object(d["g"])("span",null,Object(d["y"])(n.year),1)]),Object(d["g"])("div",L,[Object(d["E"])(Object(d["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.grossIncome=e})},null,512),[[d["B"],i.grossIncome,void 0,{number:!0}]])]),Object(d["g"])("div",J,[Object(d["E"])(Object(d["g"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.withholdings=e})},null,512),[[d["B"],i.withholdings,void 0,{number:!0}]])]),Object(d["g"])("div",G,[Object(d["g"])(c,{modelValue:i.filingState,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.filingState=e})},null,8,["modelValue"])])])}));n("a9e3");function H(e,t,n,a,i,r){return Object(d["E"])((Object(d["p"])(),Object(d["d"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.state=e})},[(Object(d["p"])(!0),Object(d["d"])(d["a"],null,Object(d["v"])(r.states,(function(e){return Object(d["p"])(),Object(d["d"])("option",{key:e.key,value:e.key},Object(d["y"])(e.display),9,["value"])})),128))],512)),[[d["A"],r.state]])}var W=n("a730"),U=n.n(W),N={name:"SelectStates",props:{modelValue:String},emits:["update:modelValue"],computed:{states:function(){var e=Object.keys(U.a[2020]),t=Object(l["map"])(e,(function(e){return{key:e,display:Object(l["startCase"])(e.replace("_"," "))}}));return t},state:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e)}}}};N.render=H;var q=N,z={name:"Filing",props:{year:Number,filing:Object},components:{SelectStates:q},data:function(){return{grossIncome:this.grossIncome||this.filing.grossIncome,withholdings:this.withholdings||this.filing.withholdings,filingState:this.filingState||this.filing.filingState}}};n("dbd6");z.render=M,z.__scopeId="data-v-198b9cd4";var $=z,K={2019:{grossIncome:126730.64,withholdings:8418.91,filingState:"georgia",filingStatus:"single"},2020:{grossIncome:127200,withholdings:20522,filingState:"georgia",filingStatus:"single"},2021:{grossIncome:130800,withholdings:20522,filingState:"georgia",filingStatus:"single"}},Q={name:"Filings",components:{Filing:$},data:function(){return{filings:K}},computed:{years:function(){var e=Object.keys(this.filings);return e.sort(),e},pastYear:function(){return+this.years[0]-1},futureYear:function(){return+this.years[this.years.length-1]+1}},methods:{addYear:function(e){this.filings[+e]={}}}};Q.render=C;var X=Q,Z=[{path:"/",name:"Home",component:B},{path:"/filings",name:"Filings",component:X}],ee=Object(O["a"])({history:Object(O["b"])(),routes:Z}),te=ee,ne=n("db82"),ae=function e(t,n,a,i){Object(o["a"])(this,e),this.price=t,this.units=n,this.date=a,this.fmv=i},ie=function e(t,n,a,i,r){Object(o["a"])(this,e),this.ticker=t,this.option=n,this.stock=a,this.sale=i,this.date=r},re=function e(t,n,a,i,r,c){Object(o["a"])(this,e),this.action=t,this.ticker=n,this.price=a,this.units=i,this.date=r,this.fmv=c},ce=function(){function e(t,n,a){Object(o["a"])(this,e),this.taxInfo=t,this.cash=a,Object.values(n).forEach((function(e){return e.agi=e.grossIncome-e.withholdings||0})),this.filings=n,this._events=[],this._lifecycles=[]}return Object(s["a"])(e,[{key:"getTaxInfo",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=a?"capGains":"income",r=this.taxInfo[e][t].deduction,c=this.taxInfo[e][t].brackets[i];return[r,c]}},{key:"grantOption",value:function(e,t,n,a){var i=new re("grant option",e,t,n,a);this._events.push(i);var r=new ae(t,n,a),c=new ie(e,r);this._lifecycles.push(c)}},{key:"grantOptionsFromSchedule",value:function(e,t,n,a,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u["DateTime"].utc(),c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:48;if(i){if(r<i)return null;if(i!=a){var s=12*(i.year-a.year),o=i.month-a.month,l=s+o,d=Math.floor(n/c*l);this.grantOption(e,t,d,i),n-=d,c-=l,a=i}}var f,b=~~(n/c),p=n%c;for(f=0;f<c;f++){var v=f>p?b+1:b,h=a.plus(u["Duration"].fromObject({months:f})),g=void 0===i||h>=i,j=void 0===r||h<=r;g&&j&&this.grantOption(e,t,v,h)}}},{key:"splitLifecycle",value:function(e,t){var n=Object(l["cloneDeep"])(e),a=Object(l["cloneDeep"])(e),i=e.option.units;return n.option.units=t,a.option.units=i-t,e.stock&&(n.stock.units=t,a.stock.units=i-t),[n,a]}},{key:"evolveAsset",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"date";switch(a=a||u["DateTime"].utc(),e){case"sell stocks":var l="stock",d="sale";break;case"exercise options":l="option",d="stock";break;default:throw"".concat(e," is not a valid event")}var f,b=[],p=Object(c["a"])(this._lifecycles.entries());try{for(p.s();!(f=p.n()).done;){var v=Object(r["a"])(f.value,2),h=v[0],g=v[1];g.ticker==t&&void 0==g[d]&&void 0!=g[l]&&b.push([h,g])}}catch(F){p.e(F)}finally{p.f()}switch(o){case"date":b=b.sort((function(e,t){return e[1][l].date-t[1][l].date}));break;case"price":b=b.sort((function(e,t){return t[1][l].price-e[1][l].price}));break}var j,O=Object(c["a"])(b);try{for(O.s();!(j=O.n()).done;){var m=Object(r["a"])(j.value,2),y=m[0],k=m[1],w=k[l];if(w.units<=n)this._lifecycles[y][d]=new ae(w.price,w.units,a,s),this._lifecycles[y].date=a,n-=w.units;else{k.date=a;var x=this.splitLifecycle(k,n),_=Object(r["a"])(x,2),S=_[0],T=_[1];this._lifecycles.push(T);var I="sell stocks"==e?i:w.price;S[d]=new ae(I,n,a,s),this._lifecycles[y]=S,n=0}if(this._events.push(new re(e,t,w.price,w.units,a,s)),!n)break}}catch(F){O.e(F)}finally{O.f()}}},{key:"applyTaxBrackets",value:function(e,t){var n=0;return Object(l["each"])(t,(function(a,i){if(0!=e){if(i<t.length-1)var r=t[i+1].incomeLevel,c=r-a.incomeLevel,s=Object(l["min"])([e,c]);else s=e;n+=s*a["marginalRate"],e-=s}})),e&&(n+=e*t[-1].marginalRate),Object(l["max"])([0,n])}},{key:"calculateIncomeTaxes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.filings[e],a=this.getTaxInfo(e,n.filingState,n.filingStatus),i=Object(r["a"])(a,2),c=i[0],s=i[1],o=this.getTaxInfo(e,"federal",n.filingStatus),u=Object(r["a"])(o,2),d=u[0],f=u[1],b=Object(l["get"])(n,"federalDeduction",d),p=Object(l["get"])(n,"stateDeduction",c),v=n.agi-b,h=n.agi-p,g=this.applyTaxBrackets(v,f),j=this.applyTaxBrackets(h,s);if(null!=t){var O=this.applyTaxBrackets(v+t,f),m=this.applyTaxBrackets(h+t,s);g=O-g,j=m-j}return{federal:g,state:j}}},{key:"calculateCapitalGainsTaxes",value:function(e){var t=this.filings[e],n=Object(l["groupBy"])(this._lifecycles,(function(e){return Object(l["get"])(e,"sale")?e.sale.date.year:void 0}))[e],a=0,i=0;Object(l["each"])(n,(function(e){var t=(e.sale.date-e.option.date).days>=730,n=(e.sale.date-e.stock.date).days>=365,r=e.stock.price*e.stock.units,c=e.sale.price*e.sale.units;t&&n?i+=c-r:a+=c-r}));var r=this.calculateIncomeTaxes(e,a),c=this.getTaxInfo(e,"federal",t.filingStatus,!0);return r.capitalGains=this.applyTaxBrackets(i,c[1]),r}},{key:"calculateAmtTaxes",value:function(e){var t=72900,n=.26,a=Object(l["groupBy"])(this._lifecycles,(function(e){return Object(l["get"])(e,"stock")?e.stock.date.year:void 0}))[e],i=Object(l["each"])(a,(function(e){if(null!=e.stock)return e})),r=Object(l["sum"])(Object(l["each"])(i,(function(e){return e.stock.fmv*e.stock.units-e.option.units*e.option.price}))),c=this.filings[e].agi+r-t,s=c*n,o=this.calculateIncomeTaxes(e),u=Object(l["max"])([0,s-o.federal]);return Object(l["max"])([0,u])}},{key:"events",get:function(){return this._events.sort((function(e,t){return e.date-t.date}))}},{key:"lifecycles",get:function(){return this._lifecycles.sort((function(e,t){return e.date-t.date}))}}]),e}();function se(e,t,n){return oe.apply(this,arguments)}function oe(){return oe=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,i){var r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.toLowerCase().replace(" ","_"),c="https://raw.githubusercontent.com/taxee/taxee-tax-statistics"+"/master/src/statistics/".concat(Object(l["min"])([t,2020]),"/").concat(r,".json"),e.abrupt("return",ne.get(c).then((function(e){var r,c=JSON.parse(e.text),s="federal"==n?c.taxWithholdingPercentageMethodTables.annual[i]:c[i],o=s.deductions[0].deductioAmount,u=Object(l["map"])(s.incomeTaxBrackets,(function(e){return{incomeLevel:e.bracket,marginalRate:e.marginalRate/100}}));"federal"==n&&(r=Object(l["map"])(s.incomeTaxBrackets,(function(e){return{incomeLevel:e.bracket,marginalRate:e.marginalCapitalGainRate/100}})));var d=Object(a["a"])({},n,{deduction:o,brackets:{income:u,capGains:r}});return[t,d]})).catch((function(e){throw e})));case 3:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}function le(e,t){return ue.apply(this,arguments)}function ue(){return ue=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var a,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(l["flatMap"])(Object(l["toPairs"])(t),(function(e){var t=Object(r["a"])(e,2),n=t[0],a=t[1],i={year:n,region:a.filingState,status:a.filingStatus},c={year:n,region:"federal",status:a.filingStatus};return[i,c]})),i=[],Object(l["each"])(a,(function(e){var t="".concat(e.year,".").concat(e.region);void 0==Object(l["get"])(n,t)&&i.push(se(e.year,e.region,e.status))})),e.next=5,Promise.all(i);case 5:return c=e.sent,Object(l["each"])(c,(function(e){n[e[0]]=Object(l["merge"])(Object(l["get"])(n,e[0],{}),e[1])})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function de(e,t){return fe.apply(this,arguments)}function fe(){return fe=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le(t,n);case 2:return n=e.sent,e.next=5,le(t,n);case 5:return n=e.sent,a=new ce(n,t,13e3),a.grantOptionsFromSchedule("JEFF",2.18,8e3,u["DateTime"].utc(2019,1,30),u["DateTime"].utc(2020,1,30)),a.grantOptionsFromSchedule("JEFF",3.08,5e3,u["DateTime"].utc(2020,6,1),null),a.evolveAsset("exercise options","JEFF",2400,u["DateTime"].utc(2020,12,30),null,15),a.evolveAsset("exercise options","JEFF",1600,u["DateTime"].utc(2021,1,31),null,16.57),a.evolveAsset("sell stocks","JEFF",1e3,u["DateTime"].utc(),50),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}function be(e,t){return pe.apply(this,arguments)}function pe(){return pe=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:de(t,n).then((function(e){console.log(e.events),console.log(e.lifecycles),console.log([e.calculateAmtTaxes(2021),e.calculateCapitalGainsTaxes(2021)])}));case 1:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}Object(d["c"])(j).use(te).mount("#app")},8497:function(e,t,n){"use strict";n("c45a")},9747:function(e,t,n){},c45a:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},dbd6:function(e,t,n){"use strict";n("2dc3")}});
//# sourceMappingURL=app.f22ad65d.js.map